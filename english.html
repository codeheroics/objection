<!doctype html>
<html>
<head>
  <title>OBJECTION!</title>
  <script>
    var objectionObjects = [];
    var characterPics = {
      phoenix: {
        picture: "phoenix.gif",
        facing: "right"
      },
      miles: {
        picture: "miles.gif",
        facing: "left"
      },
      manfred: {
        picture: "manfred.gif",
        facing: "left"
      },
      franziska: {
        picture: "franziska.gif",
        facing: "left"
      },
      godot: {
        picture: "godot.gif",
        facing: "left"
      },
      mia: {
        picture: "mia.gif",
        facing: "right"
      },
      calisto: {
        picture: "calisto.gif",
        facing: "left"
      },
      quercus: {
        picture: "quercus.gif",
        facing: "left"
      },
      jacques: {
        picture: "jacques.gif",
        facing: "left"
      },
      klavier: {
        picture: "klavier.gif",
        facing: "left"
      },
      kristoph: {
        picture: "kristoph.gif",
        facing: "left"
      },
      calisto: {
        picture: "calisto.gif",
        facing: "left"
      },
      winston: {
        picture: "winston.gif",
        facing: "left"
      },
      apollo: {
        picture: "apollo.gif",
        facing: "right"
      }
    }

    function replaceImgElement(picture, div) {
      var img=document.createElement('img');
      img.setAttribute('src', 'pictures/' + picture);
      img.setAttribute('height', '200');
      div.replaceChild(img, div.firstChild);
    }

    function prepareNextObjection() {
      setTimeout(function() {
        var random = Math.floor(Math.random() * objectionObjects.length);
        var objectionObject = objectionObjects[random];
        console.log(objectionObjects[random])
        var requiredDivId = objectionObject.facing === "right" ? 'leftCharacter' : 'rightCharacter';
        replaceImgElement(objectionObject.picture, document.getElementById(requiredDivId));
        objectionObject.audioElement.play();
        prepareNextObjection();
      }, Math.random() * 15000 + 1000)
    }

    document.addEventListener("DOMContentLoaded", function() {
      audioElementsNodeList = document.getElementsByTagName('audio');
      for (var i = 0; i < audioElementsNodeList.length; i++) {
        character = audioElementsNodeList[i].className;
        objectionObjects.push({
          audioElement: audioElementsNodeList[i],
          picture: characterPics[character].picture,
          facing: characterPics[character].facing
        });
      }

      prepareNextObjection();
    });

  
  </script>
</head>
<body>
  <header style="text-align:center;">
    <img src="pictures/objection.png" alt="OBJECTION" height="400" />
  </header>
  <div style="text-align:center;">
    <span id="leftCharacter"><img src="pictures/objection.png" height="200" /></span>
    <span id="centerStuff"><img src="pictures/objection.png" height="200" /></span>
    <span id="rightCharacter"><img src="pictures/objection.png" height="200" /></span>
  </div>
  <div>
    <audio class="quercus" src="english/objection (1).wav">No audio tag support in your browser :(</audio>
    <audio class="apollo" src="english/objection (2).wav">No audio tag support in your browser :(</audio>
    <audio class="calisto" src="english/objection (3).wav">No audio tag support in your browser :(</audio>
    <audio class="godot" src="english/objection (4).wav">No audio tag support in your browser :(</audio>
    <audio class="klavier" src="english/objection (5).wav">No audio tag support in your browser :(</audio>
    <audio class="kristoph" src="english/objection (6).wav">No audio tag support in your browser :(</audio>
    <audio class="mia" src="english/objection (7).wav">No audio tag support in your browser :(</audio>
    <audio class="miles" src="english/objection (8).wav">No audio tag support in your browser :(</audio>
    <audio class="franziska" src="english/objection (9).wav">No audio tag support in your browser :(</audio>
    <audio class="manfred" src="english/objection (10).wav">No audio tag support in your browser :(</audio>
    <audio class="winston" src="english/objection (11).wav">No audio tag support in your browser :(</audio>
    <audio class="phoenix" src="english/objection (12).wav">No audio tag support in your browser :(</audio>
  </div>
</body>
</html>